<button id="theme-toggle" class="theme-toggle" type="button" aria-label="Switch light and dark color mode">
  Toggle theme
</button>

<script>
  const root = document.documentElement;
  const toggle = document.getElementById("theme-toggle");
  const storageKey = "epochapi-theme";

  const applyTheme = (theme) => {
    root.dataset.theme = theme;
    toggle?.setAttribute("aria-pressed", String(theme === "dark"));
  };

  const preferred = window.matchMedia("(prefers-color-scheme: dark)").matches
    ? "dark"
    : "light";
  const stored = window.localStorage.getItem(storageKey) || preferred;
  applyTheme(stored);

  toggle?.addEventListener("click", () => {
    const next = root.dataset.theme === "dark" ? "light" : "dark";
    window.localStorage.setItem(storageKey, next);
    applyTheme(next);
  });
</script>
